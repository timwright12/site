<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick iPhone Media Detection</title>
    <meta name="description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="stylesheet" href="/site/css/index.css">
    <link rel="alternate" href="/site/feed/feed.xml" type="application/atom+xml" title="Tim Wright">
    <link rel="alternate" href="/site/feed/feed.json" type="application/json" title="Tim Wright">

    <script>

		WebFontConfig = {
			google: {
				families: ['Open Sans:400,700', 'Judson:400,700']
			}
		};

		(function(d) {
			var wf = d.createElement('script'), s = d.scripts[0];
			wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
			wf.async = true;
			s.parentNode.insertBefore(wf, s);
		})(document);

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-875557-1', 'auto');
		ga('send', 'pageview');

	</script>

	<noscript>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&Judson:ital,wght@0,400;0,700;1,400&display=swap" />
	</noscript>

  </head>
  <body>

  <header role="banner" id="banner">

    <h1 class="logo" itemscope="" itemtype="http://schema.org/Organization">
      <a href="/" itemprop="url">Tim Wright</a>
    </h1>

    <nav role="navigation" id="nav">
      <ul>
          <li class="nav-item"><a href="/site/blog/">Blog</a></li>
          <li class="nav-item"><a href="/site/work/">Work</a></li>
        <li class="nav-item"><a href="mailto:hello@timwright.org?subject=An Interesting Message from timwright.org">Contact</a></li>
      </ul>
    </nav>
  </header>

    <article class="tmpl-post" id="main" role="main">
      
<time datetime="2008-06-17">17 Jun 2008</time>

<h1>Quick iPhone Media Detection</h1>

<p>I finally got around to reading <a href="http://mezzoblue.com/archives/2008/03/18/mediatyping/">David Shea's post on MediaTyping</a> today and as I was going through it, I asked myself if all the PHP he was using was really necessary. It sure wasn't for what I wanted to do. I just wanted to detect an iPhone or iPod to test out some interfaces.</p>
<p>I did some digging around after that and came across a short post on <a href="http://www.iphoneappr.com/howto.php?id=1">iPhoneAppr</a> about how to auto-detect a browser based on the user agent (what is essentially the browser).</p>
<h4 id="the-http-user-agent" tabindex="-1">The HTTP User Agent <a class="direct-link" href="#the-http-user-agent" aria-hidden="true">#</a></h4>
<p>When you visit a web page, your user agent changes based on the media you're using. So, right now, if you're using Firefox 2 your user agent string looks something like this:</p>
<pre><code>Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.14)
Gecko/20080404 Firefox/2.0.0.14
</code></pre>
<p>and if you're on an iPhone it will look something like this:</p>
<pre><code>Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420.1 (KHTML, like
Gecko) Version/3.0 Mobile/4A102 Safari/419.3
</code></pre>
<p>As you can see, the user agent string has some key difference. The iPhone agent actually says &quot;iPhone&quot; in it. With this in mind we can use a neat little function built into PHP 5 called <a href="http://us2.php.net/stripos">stripos</a> to search the user agent and return some code (like code to send someone to a mobile version of a web site).</p>
<p>Let's just get into it shall we? Here's the PHP:</p>
<pre><code>&lt;?php
//setting the variables
ipod = stripos($_SERVER['HTTP_USER_AGENT'],&quot;iPod&quot;);
$iphone = stripos($_SERVER['HTTP_USER_AGENT'],&quot;iPhone&quot;);

//detecting device
if ($ipod == true || $iphone == true){
    echo &quot;iPhone or iPod&quot;;
    } else {
    echo &quot;Screen&quot;;
}
?&gt;
</code></pre>
<p><code>Stripos</code> is a function that takes 2 arguments. The first is what you want to search (the haystack) and the second is what you want to search for (the needle). If the <em>needle</em> is found in the <em>haystack</em> it will return &quot;true&quot;, and if not, it will return false. An important thing to note about <code>stripos</code> is that it's case insensitive[edit], so if you have some initial trouble, check your spacing and maybe try trim().</p>
<h4 id="trouble-i-had" tabindex="-1">Trouble I had <a class="direct-link" href="#trouble-i-had" aria-hidden="true">#</a></h4>
<p>In the PHP manual it says to use === when checking the value (which is for an exact match, true=true), but for some reason that didn't work for me so I used == (match, but not exact so true=true &amp; true=1 for boolean values). It's usually just a spacing issue, but I'm not real sure this time. Feel free to tell me I'm wrong.</p>
<p>I like this, it's pretty easy, light, and useful if you just want an iPhone/iPod interface.</p>


    </article>

    <!-- Current page: /site/posts/quick-iphone-media-detection/ -->
  </body>
</html>
