<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Labels v2 - Patch</title>
    <meta name="description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="stylesheet" href="/site/css/index.css">
    <link rel="alternate" href="/site/feed/feed.xml" type="application/atom+xml" title="Tim Wright">
    <link rel="alternate" href="/site/feed/feed.json" type="application/json" title="Tim Wright">

    <script>

		WebFontConfig = {
			google: {
				families: ['Open Sans:400,700', 'Judson:400,700']
			}
		};

		(function(d) {
			var wf = d.createElement('script'), s = d.scripts[0];
			wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
			wf.async = true;
			s.parentNode.insertBefore(wf, s);
		})(document);

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-875557-1', 'auto');
		ga('send', 'pageview');

	</script>

	<noscript>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&Judson:ital,wght@0,400;0,700;1,400&display=swap" />
	</noscript>

  </head>
  <body>

  <header role="banner" id="banner">

    <h1 class="logo" itemscope="" itemtype="http://schema.org/Organization">
      <a href="/" itemprop="url">Tim Wright</a>
    </h1>

    <nav role="navigation" id="nav">
      <ul>
          <li class="nav-item"><a href="/site/work/projects/"></a></li>
          <li class="nav-item"><a href="/site/work/talks/"></a></li>
          <li class="nav-item"><a href="/site/work/writing/"></a></li>
          <li class="nav-item"><a href="/site/blog/">Blog</a></li>
          <li class="nav-item"><a href="/site/work/">Work</a></li>
        <li class="nav-item"><a href="mailto:hello@timwright.org?subject=An Interesting Message from timwright.org">Contact</a></li>
      </ul>
    </nav>
  </header>

    <main class="tmpl-post" id="main">
      
<time datetime="2010-02-02">02 Feb 2010</time>

<h1>Sliding Labels v2 - Patch</h1>

<p>Last week I wrote an article about sliding form labels that got quite a bit of attention. Many of the commenters brought up a couple good points/bug in the Sliding Label code that I wanted to address and provide a patch for:</p>
<ul>
<li>The sliding label was barfing out in <strong>Safari</strong> when auto-fill was active</li>
<li>The default scripting didn't work on <strong>textareas</strong></li>
</ul>
<p>I sat down yesterday and wrote a patch/new version of sliding labels which I think addresses these two problems.</p>
<h3 id="the-new-jquery" tabindex="-1">The new jQuery <a class="direct-link" href="#the-new-jquery" aria-hidden="true">#</a></h3>
<pre><code>$(function(){
$('form#info .slider label').each(function(){
	var labelColor = '#999';
	var restingPosition = '5px';

	// style the label with JS for progressive enhancement
	$(this).css({
		'color' : labelColor,
		 	'position' : 'absolute',
	 		'top' : '6px',
			'left' : restingPosition,
			'display' : 'inline',
    		        'z-index' : '99'
	});

	var inputval = $(this).next().val();

	// grab the label width, then add 5 pixels to it
	var labelwidth = $(this).width();
	var labelmove = labelwidth + 5 +'px';

	// onload, check if a field is filled out, if so, move the label out of the way
	if(inputval !== ''){
		$(this).stop().animate({ 'left':'-'+labelmove }, 1);
	}

	// if the input is empty on focus move the label to the left
	// if it's empty on blur, move it back
	$('input, textarea').focus(function(){
		var label = $(this).prev('label');
		var width = $(label).width();
		var adjust = width + 5 + 'px';
		var value = $(this).val();

		if(value == ''){
			label.stop().animate({ 'left':'-'+adjust }, 'fast');
		} else {
			label.css({ 'left':'-'+adjust });
		}
	}).blur(function(){
		var label = $(this).prev('label');
		var value = $(this).val();

		if(value == ''){
			label.stop().animate({ 'left':restingPosition }, 'fast');
		}

	});
}); // End &quot;each&quot; statement
}); // End loaded jQuery
</code></pre>
<h3 id="textarea-html" tabindex="-1">Textarea HTML <a class="direct-link" href="#textarea-html" aria-hidden="true">#</a></h3>
<p>The HTML for the textarea follows the same convention as the rest of the inputs, in only needing a wrapping element.</p>
<pre><code>&lt;div id=&quot;comment-wrap&quot;  class=&quot;slider&quot;&gt;
    &lt;label for=&quot;comment&quot;&gt;Comment&lt;/label&gt;
    &lt;textarea cols=&quot;53&quot; rows=&quot;10&quot; id=&quot;comment&quot;&gt;&lt;/textarea&gt;
&lt;/div&gt;&lt;!--/#comment-wrap--&gt;
</code></pre>
<p>There are no major changes to the plugin, just a few tweaks. If you find anymore bug, please let me know.</p>


    </main>

    <!-- Current page: /site/posts/sliding-labels-v2/ -->
  </body>
</html>
