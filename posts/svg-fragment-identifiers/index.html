<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Clean SVG Fragment Identifier Polyfill for Implementing Icons</title>
    <meta name="description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="stylesheet" href="/site/css/index.css">
    <link rel="alternate" href="/site/feed/feed.xml" type="application/atom+xml" title="Tim Wright">
    <link rel="alternate" href="/site/feed/feed.json" type="application/json" title="Tim Wright">

    <script>

		WebFontConfig = {
			google: {
				families: ['Open Sans:400,700', 'Judson:400,700']
			}
		};

		(function(d) {
			var wf = d.createElement('script'), s = d.scripts[0];
			wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
			wf.async = true;
			s.parentNode.insertBefore(wf, s);
		})(document);

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-875557-1', 'auto');
		ga('send', 'pageview');

	</script>

	<noscript>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&Judson:ital,wght@0,400;0,700;1,400&display=swap" />
	</noscript>

  </head>
  <body>

  <header role="banner" id="banner">

    <h1 class="logo" itemscope="" itemtype="http://schema.org/Organization">
      <a href="/" itemprop="url">Tim Wright</a>
    </h1>

    <nav role="navigation" id="nav">
      <ul>
          <li class="nav-item"><a href="/site/work/projects/"></a></li>
          <li class="nav-item"><a href="/site/work/talks/"></a></li>
          <li class="nav-item"><a href="/site/work/writing/"></a></li>
          <li class="nav-item"><a href="/site/blog/">Blog</a></li>
          <li class="nav-item"><a href="/site/work/">Work</a></li>
        <li class="nav-item"><a href="mailto:hello@timwright.org?subject=An Interesting Message from timwright.org">Contact</a></li>
      </ul>
    </nav>
  </header>

    <main class="tmpl-post" id="main">
      
<time datetime="2015-11-04">04 Nov 2015</time>

<h1>A Clean SVG Fragment Identifier Polyfill for Implementing Icons</h1>

<p>Looks can be deceiving, especially with icons on the Web. There's a lot of debate over the best way to implement those small graphics next to words in your site or application. We've gone through phases of using: individual images, <a href="http://www.smashingmagazine.com/2009/04/the-mystery-of-css-sprites-techniques-tools-and-tutorials/">CSS Sprites</a>, <a href="https://css-tricks.com/examples/IconFont/">icon fonts</a>, and now we seem to be landing on using <a href="http://blogs.adobe.com/dreamweaver/2015/09/css-vs-svg-the-final-roundup.html">Scalable Vector Graphics</a> (SVGs) to get that crisp, scalable icon we all want. If you look closely, you can <a href="https://css-tricks.com/icon-fonts-vs-svg/">watch the tides turn</a> in that direction.</p>
<p>Putting the debate about sprites vs. fonts vs. SVG aside for a moment (because, ultimately, your solution will be what's best for your individual project), there's still a lot of debate over the best way to implement SVGs as an icon. And that's why we're here today, to talk about <a href="http://www.broken-links.com/2012/08/14/better-svg-sprites-with-fragment-identifiers/">SVG Fragment Identifiers</a>.</p>
<h2 id="svg-fragment-identifiers" tabindex="-1">SVG Fragment Identifiers <a class="direct-link" href="#svg-fragment-identifiers" aria-hidden="true">#</a></h2>
<p>For those not familiar, an SVG is basically a bunch of code that draws an image (a very simplified definition, I know). It can be contained inside a file with a .svg extension or it can be embedded right into the HTML inside an <code>&lt;svg&gt;</code> element (this is a linked vs. inline SVG - not here to debate which is better, they both have benefits). Inside that file (or element) you can add code to create more than one image. This is the code version of a CSS sprite (instead of an image edit tool, you can use HTML) - it's called an SVG sprite and until now, I've found them horrible to deal with.</p>
<p>Last week I was in a client meeting and noticed that the front-end developer on the other end of the call was using an icon syntax I hadn't really seen before:</p>
<pre><code>&lt;svg aria-hidden=&quot;true&quot; class=&quot;icon icon-archive&quot;&gt;
    &lt;use xlink:href=&quot;img/svg-defs.svg#icon-archive&quot;&gt;&lt;/use&gt;
&lt;/svg&gt;
</code></pre>
<p><strong>I fell in love immediately</strong>. I had seen this usage without the image path, just the URL hash, but never with it. We geeked out for awhile about it. The hash ultimately links to an ID inside the SVG file, and you can create these by hand or generate them from a tool like <a href="https://icomoon.io/app/">IcoMoon</a> (use the tool). I immediately started researching and found a roundup by <a href="http://twitter.com/chriscoyier">Chris Coyier</a> on <a href="https://css-tricks.com/svg-sprites-use-better-icon-fonts/">Creating an Icon System with SVG Sprites</a>.</p>
<p>Buried at the bottom of that article was a similar syntax to the one above, with a note about how poor <a href="http://caniuse.com/#feat=svg-fragment">support in Internet Explorer</a> is. The concept of using fragment identifiers does work in IE9+, but the syntax I fell in love with (using the image path) doesn't work in any version of Internet Explorer. I was heartbroken (and overly dramatic).</p>
<p>In Internet Explorer, the fragment identifier works if the SVG itself (in its entirety) is embedded into the document. I hate this solution, because it's messy. I want a nice, clean, HTML output.</p>
<h2 id="the-polyfill" tabindex="-1">The Polyfill <a class="direct-link" href="#the-polyfill" aria-hidden="true">#</a></h2>
<p>After remembering that the Web is an amazing place to work, I began writing a polyfill to make this syntax work how I wanted it, in all the places I wanted it. It's up on Github, and I called it the <a href="https://github.com/timwright12/SVG-Icon-Sprite-Polyfill/">SVG Icon Sprite Polyfill</a>. I also modified the syntax a bit to help with accessibility:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Golf clubs in a bag<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon icon-add-to-my-bag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Golf clubs in a bag<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/svg-defs.svg#icon-add-to-my-bag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>use</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre>
<p>Adding a <em>role</em> attribute and an <em>aria-label</em> makes this icon accessible to screen readers, rather than hiding it altogether. I like that much better.</p>
<p>Using this syntax with the JavaScript in the polyfill <em>will</em> make it work in Internet Explorer 9+. I stopped at IE 9 because SVGs don't work in IE8 anyway, so they would need to be again polyfilled with a PNG, JPG, or GIF. Essentially, it creates the syntax IE supports by firing off an ajax call to the SVG file, sticking it into the document, and hiding it. <a href="https://en.wikipedia.org/wiki/As_easy_as_pie">Easy as pie</a>.</p>
<p><a href="https://github.com/timwright12/SVG-Icon-Sprite-Polyfill">Download or fork the polyfill</a>, and let me know what you think!</p>
<p>Read the original article on <a href="http://www.freshtilledsoil.com/svg-fragment-identifiers/">the Fresh Tilled Soil blog</a>.</p>


    </main>

    <!-- Current page: /site/posts/svg-fragment-identifiers/ -->
  </body>
</html>
